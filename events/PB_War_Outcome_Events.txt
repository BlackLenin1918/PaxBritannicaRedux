##################
# GENERIC WAR OUTCOME EVENTS
##################

add_namespace = waroutcome

country_event = {		#WAR OUTCOME - MALAY DEFEAT
	id = waroutcome.1
	desc = waroutcome.2.d
	picture = GFX_report_PB_Military_Operation

	is_triggered_only = yes

	option = { #NOT APPLICABLE
		name = waroutcome.1.a

		ai_chance = {
			factor = 80
		}

		MAL = {
			remove_state_core = 792

			clr_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
		}

		KAL = {
			clr_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
		}
	}
}

country_event = {		#Malay Independence War - Malay Victory
	id = waroutcome.2
	title = waroutcome.2.t
	desc = waroutcome.2.d
	picture = GFX_report_PB_Military_Operation

	is_triggered_only = yes

	option = { #NOT APPLICABLE
		name = waroutcome.2.a

		ai_chance = {
			factor = 80
		}

		MAL = {
			drop_cosmetic_tag = yes 

			clr_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
		}

		KAL = {
			clr_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
		}
	}
}

country_event = {		#Slovakian Revolution - Defeat
	id = waroutcome.3
	title = waroutcome.3.t
	desc = waroutcome.3.d
	picture = GFX_report_PB_Military_Operation

	is_triggered_only = yes

	option = { #NOT APPLICABLE
		name = waroutcome.3.a

		ai_chance = {
			factor = 80
		}

		SLO = {
			drop_cosmetic_tag = yes 

			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}

		HUN = {
			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}

		CRO = {
			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}
	}
}

country_event = {		#Slovakian Revolution - Victory
	id = waroutcome.4
	title = waroutcome.4.t
	desc = waroutcome.4.d
	picture = GFX_report_PB_Military_Operation

	is_triggered_only = yes

	option = { #NOT APPLICABLE
		name = waroutcome.4.a

		ai_chance = {
			factor = 80
		}

		SLO = {
			drop_cosmetic_tag = yes 

			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}

		HUN = {
			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}

		CRO = {
			clr_country_flag = PB_WAR_SYSTEM_Slovakian_Revolution
		}
	}
}

country_event = {		#Second Great War Conclusion - Future of Europe - France
	id = waroutcome.5
	title = waroutcome.5.t
	desc = waroutcome.5.d
	picture = GFX_report_PB_Military_Operation

	is_triggered_only = yes

	option = { #Restore Pre-War Borders
		name = waroutcome.5.a

		ai_chance = {
			factor = 10
		}

		FRA = {
			remove_state_core = 34
			remove_state_core = 14
			remove_state_core = 6
			remove_state_core = 35
			remove_state_core = 7
			remove_state_core = 36
		}
	}

	option = { #Partial Dismantling
		name = waroutcome.5.b

		ai_chance = {
			factor = 80
		}

		FRA = {
			remove_state_core = 34
			remove_state_core = 14
			remove_state_core = 6
			remove_state_core = 35
			remove_state_core = 7
			remove_state_core = 36
		}

		OCT = {
			add_state_core = 31
			add_state_core = 557
			add_state_core = 22
			add_state_core = 26
			add_state_core = 20
			add_state_core = 32
			add_state_core = 21
			add_state_core = 735

			transfer_state = 31
			transfer_state = 557
			transfer_state = 22
			transfer_state = 26
			transfer_state = 20
			transfer_state = 32
			transfer_state = 21
			transfer_state = 735
		}

		WLA = {
			add_state_core = 29
			transfer_state = 29
		}
	}

	option = { #Full Dismantling
		name = waroutcome.5.c

		ai_chance = {
			factor = 10
		}

		FRA = {
			remove_state_core = 34
			remove_state_core = 14
			remove_state_core = 6
			remove_state_core = 35
			remove_state_core = 7
			remove_state_core = 36

			drop_cosmetic_tag = yes
			set_cosmetic_tag = FRA_Paris_Republic
		}

		OCT = {
			add_state_core = 31
			add_state_core = 557
			add_state_core = 22
			add_state_core = 26
			add_state_core = 20
			add_state_core = 32
			add_state_core = 21
			add_state_core = 735

			transfer_state = 31
			transfer_state = 557
			transfer_state = 22
			transfer_state = 26
			transfer_state = 20
			transfer_state = 32
			transfer_state = 21
			transfer_state = 735
		}

		NRM = {
			add_state_core = 15
			transfer_state = 15

			add_state_core = 785
			transfer_state = 785
		}

		WLA = {
			add_state_core = 29
			transfer_state = 29
		}

		BRG = {
			transfer_state = 27
			transfer_state = 809
			transfer_state = 18
			transfer_state = 685
			transfer_state = 17

			add_state_core = 27
			add_state_core = 809
			add_state_core = 18
			add_state_core = 685
			add_state_core = 17

			set_cosmetic_tag = BRG_GER_OCC
		}
	}
}

country_event = {		#German Pacific - Philippines Defeat
	id = waroutcome.6
	title = waroutcome.6.t
	desc = waroutcome.6.d
	picture = GFX_report_PB_Generic_Political_Event

	trigger = {
		tag = DAS
		has_war_with = PHI
		PHI = {
			has_capitulated = no
		}
		DAS = {
			NOT = {
				controls_state = 623
				controls_state = 327
				controls_state = 624
				controls_state = 628
				controls_state = 626
				controls_state = 625
				controls_state = 627
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	fire_only_once = yes

	option = { #Offer peace to the Phillippines
		name = waroutcome.6.a

		ai_chance = {
			factor = 100
		}

		add_political_power = -150

		add_stability = -0.1

		PHI = {
			save_global_event_target_as = winning_country

			transfer_state = 627
			transfer_state = 624
			transfer_state = 625
			transfer_state = 626
			transfer_state = 628

			drop_cosmetic_tag = yes
			set_cosmetic_tag = PHI_Free_Independent
		}

		DAS = {
			white_peace = PHI
			save_global_event_target_as = losing_country
			set_country_flag = DAS_PHI_Victory

			remove_state_core = 627
			remove_state_core = 624
			remove_state_core = 625
			remove_state_core = 626
			remove_state_core = 628
		}

		if = {
			limit = {
				GER = {
					has_war_with = PHI
				}
			}
			GER = {
				white_peace = PHI
			}
		}

		set_global_flag = war_won
		set_global_flag = show_peace_popup_alert
	}

	option = { #We will not abandon the Phillippines
		name = waroutcome.6.b

		ai_chance = {
			factor = 0
		}

		add_political_power = -50

		add_war_support = -0.1
	}
}

country_event = {		#Russian Seeks Peace Terms
	id = waroutcome.8
	title = waroutcome.8.t
	desc = waroutcome.8.d
	picture = GFX_report_PB_Generic_Political_Event

	is_triggered_only = yes

	option = { #Not Applicable
		name = waroutcome.8.a

		ai_chance = {
			factor = 100
		}

		RUS = {
			leave_faction = yes
		}

		every_country = {
			limit = {
				has_war_with = RUS
			}
			white_peace = RUS
		}

		add_political_power = 250

		add_stability = 0.25

		country_event = { id = lon.1 days = 2 } 

		PET = {
			transfer_state = 195
		}

		MOS = {
			transfer_state = 219
		}

		SRU = {
			transfer_state = 217
		}

		TUR = {
			transfer_state = 341
		}

		ENG = {
			add_to_faction = PET
			add_to_faction = MOS
			add_to_faction = SRU
		}

		GER = {
			annex_country = {
				target = MGE
				transfer_troops = yes
			}		

			annex_country = {
				target = CZE
				transfer_troops = yes
			}	

			annex_country = {
				target = DDR
				transfer_troops = yes
			}	

			annex_country = {
				target = GLF
				transfer_troops = yes
			}	

			annex_country = {
				target = PRS
				transfer_troops = yes
			}	

			transfer_state = 28
			transfer_state = 42
			transfer_state = 8
			transfer_state = 909	
		}

		if = {
			limit = {
				AFG = {
					exists = yes
					is_subject_of = RUS
				}
			}
			RUS = {
				end_puppet = AFG
			}
			every_country = {
				limit = {
					has_war_with = AFG
				}
				white_peace = AFG
			}
			AFG = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = AFG_Afghanistan_Restored
			}
		}

		if = {
			limit = {
				ASK = {
					exists = yes
					is_subject_of = RUS
				}
			}
			BCL = {
				annex_country = {
					target = ASK
					transfer_troops = yes
				}		
			}
		}

		if = {
			limit = {
				FIN = {
					exists = yes
				}
			}
			FFI = {
				annex_country = {
					target = FIN
					transfer_troops = yes
				}

				set_cosmetic_tag = FIN_Unified
			}
		}

		if = {
			limit = {
				CHI = {
					exists = yes
				}
				ROC = {
					exists = no
				}
				NOT = {
					OR = {
						has_global_flag = PB_WW2_China_Defeated
						has_global_flag = PB_RUS_Siberian_Armistice
					}				
				}
			}
			CHI = {
				transfer_state = 408
				transfer_state = 409
				transfer_state = 745

				annex_country = {
					target = MON
					transfer_troops = yes
				}

				annex_country = {
					target = MAN
					transfer_troops = yes
				}
			}
		}

		if = {
			limit = {
				ROC = {
					exists = yes
				}
				CHI = {
					exists = no
				}
				NOT = {
					OR = {
						has_global_flag = PB_WW2_China_Defeated
						has_global_flag = PB_RUS_Siberian_Armistice
					}	
				}
			}
			ROC = {
				transfer_state = 408
				transfer_state = 409
				transfer_state = 745

				annex_country = {
					target = MON
					transfer_troops = yes
				}

				annex_country = {
					target = MAN
					transfer_troops = yes
				}
			}
		}

		if = {
			limit = {
				has_global_flag = PB_WW2_China_Defeated
			}
			MAN = {
				transfer_state = 408
				transfer_state = 409
				transfer_state = 745
			}
		}

		YEK = {
			transfer_state = 575
			transfer_state = 574
			transfer_state = 644
			transfer_state = 565
		}

		BRK = {
			transfer_state = 564
			transfer_state = 566
		}

		FER = {
			transfer_state = 563
			transfer_state = 561
			transfer_state = 560
			transfer_state = 657
			transfer_state = 562
			transfer_state = 637
		}

		if = {
			limit = {
				NOT = {
					OR = {
						has_global_flag = PB_WW2_Japan_Defeated
						has_global_flag = PB_RUS_Siberian_Armistice
					}	
				}
			}
			JAP = {
				transfer_state = 555
				transfer_state = 537
				transfer_state = 655
				transfer_state = 650

				set_autonomy = {
					target = YEK
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}

				set_autonomy = {
					target = BRK
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}

				set_autonomy = {
					target = FER
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}
			}
		}

		if = {
			limit = {
				has_global_flag = PB_WW2_Japan_Defeated
			}
			FER = {
				transfer_state = 555
				transfer_state = 537
				transfer_state = 655
				transfer_state = 650
			}
		}

		news_event = {
			id = PBNews.110
		}

		hidden_effect = {
			news_event = {
				id = PBNews.111
				days = 7
			}

			RUS = {
				country_event = { id = waroutcome.9 days = 8 } 
			}

			set_global_flag = PB_RUS_Siberian_Armistice
		}
	}
}

country_event = {		#Russian Collapse
	id = waroutcome.9
	title = waroutcome.9.t
	desc = waroutcome.9.d
	picture = GFX_report_PB_Generic_Political_Event

	is_triggered_only = yes

	option = { #Not Applicable
		name = waroutcome.9.a

		ai_chance = {
			factor = 100
		}

		news_event = {
			id = PBNews.112
		}

		news_event = {
			id = PBNews.113
			days = 2
		}

		NRU = {
			transfer_state = 213
			transfer_state = 214
			transfer_state = 351
			transfer_state = 400
			transfer_state = 398
			transfer_state = 397
			transfer_state = 262
			load_oob = "RUS_Loyalist_CivWar"
			inherit_technology = RUS
		}

		DRU = {
			transfer_state = 240
			transfer_state = 220
			transfer_state = 258
			transfer_state = 222
			transfer_state = 224
			transfer_state = 245
			transfer_state = 218
			transfer_state = 260
			transfer_state = 265
			transfer_state = 239
			transfer_state = 257
			transfer_state = 254
			transfer_state = 223
			transfer_state = 205
			transfer_state = 243
			transfer_state = 242
			transfer_state = 246
			transfer_state = 247
			transfer_state = 248
			transfer_state = 253
			transfer_state = 255
			transfer_state = 250
			transfer_state = 252
			load_oob = "DRU_Republican_CivWar"
			inherit_technology = RUS
		}

		RRU = {
			transfer_state = 209
			transfer_state = 208
			transfer_state = 210
			transfer_state = 244
			transfer_state = 264
			transfer_state = 216
			transfer_state = 263
			load_oob = "RRU_Republican_CivWar"
			inherit_technology = RUS
		}

		SIB = {
			transfer_state = 581
			transfer_state = 573
			transfer_state = 572
			transfer_state = 653
			transfer_state = 580
			transfer_state = 579
			transfer_state = 516
			transfer_state = 576
			transfer_state = 567
			transfer_state = 568
			transfer_state = 569
			transfer_state = 578
			transfer_state = 570
			transfer_state = 571
			transfer_state = 403
			transfer_state = 653
			transfer_state = 572
			transfer_state = 577
			inherit_technology = RUS
		}

		ALT = {
			transfer_state = 40
			transfer_state = 654
		}

		DAG = {
			transfer_state = 232
		}

		ADY = {
			transfer_state = 233
		}

		MRP = {
			transfer_state = 235
		}

		KAM = {
			transfer_state = 237
		}

		BRI = {
			transfer_state = 238
			transfer_state = 234
		}

		IUR = {
			transfer_state = 249
			transfer_state = 651
			transfer_state = 256
			transfer_state = 399
		}

		KAZ = {
			transfer_state = 401
			transfer_state = 407
			transfer_state = 406
			transfer_state = 236
			transfer_state = 402
			transfer_state = 582
			transfer_state = 583
			transfer_state = 590
			transfer_state = 588
			transfer_state = 589
			transfer_state = 404
			transfer_state = 587
			transfer_state = 921
		}

		UZB = {
			transfer_state = 586
			transfer_state = 742
			transfer_state = 732
			transfer_state = 585
		}

		BUK = {
			transfer_state = 405
		}

		KOK = {
			transfer_state = 584
		}

		ORE = {
			transfer_state = 652
			transfer_state = 251
		}

		FFI = {
			transfer_state = 215
			transfer_state = 213
		}

		NRU = {
			declare_war_on = {
				target = DRU
				type = annex_everything
			}	

			declare_war_on = {
				target = RRU
				type = annex_everything
			}			
		}

		hidden_effect = {

			SIB = {
				country_event = { id = waroutcome.10 days = 7 } 
			}
		}
	}
}

country_event = {		#Russian Civil War - Siberian Collapse
	id = waroutcome.10
	title = waroutcome.10.t
	desc = waroutcome.10.d
	picture = GFX_report_event_diplomatic_message

	is_triggered_only = yes

	fire_only_once = yes

	option = { #
		name = waroutcome.10.a

		SIB = {
			set_cosmetic_tag = SIB_Collapse

			set_politics = {
				ruling_party = jc
			}

			add_popularity = {
				ideology = jc
				popularity = 0.5
			}

			create_country_leader = {
				name = "Collapsed Authority"
				desc = ""
				picture = "gfx/leaders/RUS/Portrait_RUS_Siberian_Wasteland.tga"
				ideology = JC_VARIANT_02
			}
		}

		URA = {
			transfer_state = 581
			transfer_state = 573
		}

		KMS = {
			transfer_state = 580
			transfer_state = 579
		}

		YKT = {
			transfer_state = 653
		}

		OMS = {
			transfer_state = 571
		}

		CHY = {
			transfer_state = 572
		}

		WHR = {
			transfer_state = 403
		}

		BAK = {
			transfer_state = 570
		}

		BOH = {
			transfer_state = 578
		}

		PSK = {
			transfer_state = 577
		}

		KUZ = {
			transfer_state = 569
		}

		KRY = {
			transfer_state = 568
		}

		SBC = {
			transfer_state = 576
		}

		ROA = {
			transfer_state = 567
		}
	}
}

country_event = {		#Russian Seeks Peace Terms - Siberia - Japan/China
	id = waroutcome.11
	title = waroutcome.11.t
	desc = waroutcome.11.d
	picture = GFX_report_PB_Generic_Political_Event

	is_triggered_only = yes

	option = { #Not Applicable
		name = waroutcome.11.a

		ai_chance = {
			factor = 100
		}

		set_global_flag = PB_RUS_Siberian_Armistice

		if = {
			limit = {
				RUS = {
					has_war_with = CHI
				}
			}
			RUS = {
				white_peace = CHI
			}
		}

		if = {
			limit = {
				RUS = {
					has_war_with = ROC
				}
			}
			RUS = {
				white_peace = ROC
			}
		}

		RUS = {
			white_peace = JAP
		}

		if = {
			limit = {
				CHI = {
					exists = yes
				}
				ROC = {
					exists = no
				}
				NOT = {
					has_global_flag = PB_WW2_China_Defeated
				}
			}
			CHI = {
				transfer_state = 408
				transfer_state = 409
				transfer_state = 745

				annex_country = {
					target = MON
					transfer_troops = yes
				}

				annex_country = {
					target = MAN
					transfer_troops = yes
				}
			}
		}

		if = {
			limit = {
				ROC = {
					exists = yes
				}
				CHI = {
					exists = no
				}
				NOT = {
					has_global_flag = PB_WW2_China_Defeated
				}
			}
			ROC = {
				transfer_state = 408
				transfer_state = 409
				transfer_state = 745

				annex_country = {
					target = MON
					transfer_troops = yes
				}

				annex_country = {
					target = MAN
					transfer_troops = yes
				}
			}
		}

		YEK = {
			transfer_state = 575
			transfer_state = 574
			transfer_state = 644
			transfer_state = 565
		}

		BRK = {
			transfer_state = 564
			transfer_state = 566
		}

		FER = {
			transfer_state = 563
			transfer_state = 561
			transfer_state = 560
			transfer_state = 657
			transfer_state = 562
			transfer_state = 637
		}

		if = {
			limit = {
				NOT = {
					has_global_flag = PB_WW2_Japan_Defeated
				}
			}
			JAP = {
				transfer_state = 555
				transfer_state = 537
				transfer_state = 655
				transfer_state = 650

				set_autonomy = {
					target = YEK
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}

				set_autonomy = {
					target = BRK
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}

				set_autonomy = {
					target = FER
					autonomous_state = autonomy_PB_Sister_Republic
					freedom_level = 0.5
				}
			}
		}
	}
}
