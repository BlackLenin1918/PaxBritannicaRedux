##################
# OCCUPATION EVENTS 
##################

add_namespace = occupation

country_event = {		#Occupation of Britain
	id = occupation.1
	title = occupation.1.t
	desc = occupation.1.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Occupied England Only
		name = occupation.1.a

		ai_chance = {
			factor = 100
		}

		trigger = {
			ROOT = {
				has_full_control_of_state = 131
				has_full_control_of_state = 130
				has_full_control_of_state = 132
				has_full_control_of_state = 129
				has_full_control_of_state = 128
				has_full_control_of_state = 125
				has_full_control_of_state = 126
				has_full_control_of_state = 338
				has_full_control_of_state = 127
				has_full_control_of_state = 128
				has_full_control_of_state = 123

				NOT = {
					has_full_control_of_state = 122
					has_full_control_of_state = 121
					has_full_control_of_state = 133
					has_full_control_of_state = 136
					has_full_control_of_state = 120
				}				
			}
		}

		OBR = {
			transfer_state = 131
			transfer_state = 130
			transfer_state = 132
			transfer_state = 129
			transfer_state = 128
			transfer_state = 125
			transfer_state = 126
			transfer_state = 338
			transfer_state = 127
			transfer_state = 128
			transfer_state = 123
		}

		set_global_flag = ENG_Collaborators_Installed

		ROOT = {
			set_autonomy = {
				target = OBR
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		if = {
			limit = {
				ROOT = {
					tag = GER
					OR = {
						has_idea = PB_Parliamentary_Monarchy
						has_idea = PB_Prussian_Constitutionalism
						has_idea = PB_Absolute_Monarchy
					}
				}
			}
			OBR = {
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = NI_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = DS_VARIANT_02
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = RC_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = CN_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = LB_VARIANT_01
				}
				
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = SS_VARIANT_01
				}

				set_cosmetic_tag = OBR_German_Monarch
			}
		}
	}

	option = { #Occupied All
		name = occupation.1.b

		ai_chance = {
			factor = 50
		}

		trigger = {
			ROOT = {
				has_full_control_of_state = 131
				has_full_control_of_state = 130
				has_full_control_of_state = 132
				has_full_control_of_state = 129
				has_full_control_of_state = 128
				has_full_control_of_state = 125
				has_full_control_of_state = 126
				has_full_control_of_state = 338
				has_full_control_of_state = 127
				has_full_control_of_state = 128
				has_full_control_of_state = 123
				has_full_control_of_state = 122
				has_full_control_of_state = 121
				has_full_control_of_state = 133
				has_full_control_of_state = 136
				has_full_control_of_state = 120				
			}
		}

		OBR = {
			transfer_state = 131
			transfer_state = 130
			transfer_state = 132
			transfer_state = 129
			transfer_state = 128
			transfer_state = 125
			transfer_state = 126
			transfer_state = 338
			transfer_state = 127
			transfer_state = 128
			transfer_state = 123
			transfer_state = 122
			transfer_state = 121
			transfer_state = 133
			transfer_state = 136
			transfer_state = 120
		}

		set_global_flag = ENG_Collaborators_Installed

		ROOT = {
			set_autonomy = {
				target = OBR
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		if = {
			limit = {
				ROOT = {
					tag = GER
					OR = {
						has_idea = PB_Parliamentary_Monarchy
						has_idea = PB_Prussian_Constitutionalism
						has_idea = PB_Absolute_Monarchy
					}
				}
			}
			OBR = {
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = NI_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = DS_VARIANT_02
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = RC_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = CN_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = LB_VARIANT_01
				}
				
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = SS_VARIANT_01
				}
			}
		}
	}

	option = { #Occupied All - Break Up UK
		name = occupation.1.c

		ai_chance = {
			factor = 50
		}

		trigger = {
			ROOT = {
				has_full_control_of_state = 131
				has_full_control_of_state = 130
				has_full_control_of_state = 132
				has_full_control_of_state = 129
				has_full_control_of_state = 128
				has_full_control_of_state = 125
				has_full_control_of_state = 126
				has_full_control_of_state = 338
				has_full_control_of_state = 127
				has_full_control_of_state = 128
				has_full_control_of_state = 123
				has_full_control_of_state = 122
				has_full_control_of_state = 121
				has_full_control_of_state = 133
				has_full_control_of_state = 136
				has_full_control_of_state = 120				
			}
		}

		OBR = {
			transfer_state = 131
			transfer_state = 130
			transfer_state = 132
			transfer_state = 129
			transfer_state = 128
			transfer_state = 125
			transfer_state = 126
			transfer_state = 338
			transfer_state = 127
			transfer_state = 128
			transfer_state = 123

			if = {
				limit = {
					ROOT = {
						NOT = {
							tag = GER
						}
					}
				}
				set_cosmetic_tag = OBR_Balked
			}
		}

		SCO = {
			transfer_state = 121
			transfer_state = 133
			transfer_state = 136
			transfer_state = 120
		}

		if = {
			limit = {
				ROOT = {
					tag = GER
					OR = {
						has_idea = PB_Parliamentary_Monarchy
						has_idea = PB_Prussian_Constitutionalism
						has_idea = PB_Absolute_Monarchy
					}
				}
			}
			SCO = {
				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = NI_VARIANT_01
				}

				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = DS_VARIANT_02
				}

				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = RC_VARIANT_01
				}

				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = CN_VARIANT_01
				}

				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = LB_VARIANT_01
				}
				
				create_country_leader = {
					name = "James VIII"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_SCO_Rupprecht.dds"
					ideology = SS_VARIANT_01
				}

				set_cosmetic_tag = SCO_German_Monarch
			}

		}

		WLS = {
			transfer_state = 122
		}

		set_global_flag = ENG_Collaborators_Installed

		ROOT = {
			set_autonomy = {
				target = OBR
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}

			set_autonomy = {
				target = SCO
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}

			set_autonomy = {
				target = WLS
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		if = {
			limit = {
				ROOT = {
					tag = GER
					OR = {
						has_idea = PB_Parliamentary_Monarchy
						has_idea = PB_Prussian_Constitutionalism
						has_idea = PB_Absolute_Monarchy
					}
				}
			}
			OBR = {
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = NI_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = DS_VARIANT_02
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = RC_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = CN_VARIANT_01
				}

				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = LB_VARIANT_01
				}
				
				create_country_leader = {
					name = "Maximilian I"
					desc = "PB_NO_DESCRIPTION"
					picture = "Portrait_OBR_Max_I.dds"
					ideology = SS_VARIANT_01
				}

				set_cosmetic_tag = OBR_German_Monarch_Balked
			}
		}
	}
}

country_event = {		#Occupation of France
	id = occupation.2
	title = occupation.2.t
	desc = occupation.2.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { 
		name = occupation.2.a

		ai_chance = {
			factor = 100
		}

		set_global_flag = FRA_Collaborators_Installed

		every_state = {
			limit = {
				is_core_of = FRA
				is_owned_by = ROOT
			}

			OFA = {
				transfer_state = PREV
			}
		}

		every_state = {
			limit = {
				is_core_of = FRA
			}

			OFA = {
				add_state_core = PREV
			}
		}

		ROOT = {
			set_autonomy = {
				target = OFA
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		OFA = {
			inherit_technology = ROOT
		}

		if = {
			limit = {
				ROOT = {
					has_republican_government = yes	
				}
			}
			OFA = {
				set_cosmetic_tag = OFA_Occupied_Republic
			}
		}

		if = {
			limit = {
				ROOT = {
					has_monarchist_government = yes	
				}
			}
			OFA = {
				set_cosmetic_tag = OFA_Occupied_Monarchy
			}
		}
	}
}

country_event = {		#Occupation of the Rhineland
	id = occupation.3
	title = occupation.3.t
	desc = occupation.3.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Independent Rhineland
		name = occupation.3.a

		ai_chance = {
			factor = 100
		}

		RHH = {
			transfer_state = 51
			transfer_state = 42

			add_state_core = 51
			add_state_core = 42
		}

		ROOT = {
			set_autonomy = {
				target = RHH
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		RHH = {
			inherit_technology = ROOT
		}

		if = {
			limit = {
				ROOT = {
					has_monarchist_government = yes	
				}
			}
			RHH = {
				set_cosmetic_tag = RHH_Occupied_Monarchy
			}
		}
	}

	option = { #Form West Germany
		name = occupation.3.b

		ai_chance = {
			factor = 0
		}

		WGR = {
			transfer_state = 51
			transfer_state = 42

			add_state_core = 51
			add_state_core = 42
		}

		ROOT = {
			set_autonomy = {
				target = WGR
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}

		WGR = {
			inherit_technology = ROOT
		}
	}
}

country_event = {		#Occupation of Alsace
	id = occupation.4
	title = occupation.4.t
	desc = occupation.4.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Return Alsace to France
		name = occupation.4.a

        trigger = {
            FRA = {
                exists = yes
            }
        }

		ai_chance = {
			factor = 100
		}

        FRA = {
            transfer_state = 28
        }
	}

	option = { #Return Alsace to Puppet
		name = occupation.4.b

        trigger = {
            WGR = {
                exists = yes
            }
        }

		ai_chance = {
			factor = 100
		}

        WGR = {
            transfer_state = 28
        }
	}

	option = { #Return Alsace to South Germany
		name = occupation.4.c

        trigger = {
            BAV = {
                exists = yes
				has_cosmetic_tag = BAV_South_Germany_Puppet
            }
        }

		ai_chance = {
			factor = 100
		}

        BAV = {
            transfer_state = 28
        }
	}
}

country_event = {		#Occupation of South Germany
	id = occupation.5
	title = occupation.5.t
	desc = occupation.5.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Form South German Federation
		name = occupation.5.a

		ai_chance = {
			factor = 0
		}

        BAV = {
            transfer_state = 50
			transfer_state = 54
			transfer_state = 53
			transfer_state = 52
			transfer_state = 153
			transfer_state = 39
			transfer_state = 152
			transfer_state = 4
			transfer_state = 102
			transfer_state = 736

			set_cosmetic_tag = BAV_South_Germany_Puppet
        }

		ROOT = {
			set_autonomy = {
				target = BAV
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}
	}

	option = { #Unify with German Occupation
		name = occupation.5.b

        trigger = {
            WGR = {
                exists = yes
				is_subject_of = ROOT
            }
        }

		ai_chance = {
			factor = 100
		}

        WGR = {
            transfer_state = 50
			transfer_state = 54
			transfer_state = 53
			transfer_state = 52
			transfer_state = 153
			transfer_state = 39
			transfer_state = 152
			transfer_state = 4
			transfer_state = 102
			transfer_state = 736
        }
	}
}

country_event = {		#Occupation of South Germany
	id = occupation.6
	title = occupation.6.t
	desc = occupation.6.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Form South German Federation
		name = occupation.6.a

		ai_chance = {
			factor = 0
		}

        BRN = {
            transfer_state = 55
			transfer_state = 60
			transfer_state = 57
			transfer_state = 56
			transfer_state = 59
			transfer_state = 65
			transfer_state = 64
			transfer_state = 61
			transfer_state = 62
			transfer_state = 63
			transfer_state = 68
			transfer_state = 66

			set_cosmetic_tag = BRN_North_Germany_Puppet
        }

		ROOT = {
			set_autonomy = {
				target = BRN
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}
	}

	option = { #Unify with German Occupation
		name = occupation.6.b

        trigger = {
            WGR = {
                exists = yes
				is_subject_of = ROOT
            }
        }

		ai_chance = {
			factor = 100
		}

        WGR = {
            transfer_state = 55
			transfer_state = 60
			transfer_state = 57
			transfer_state = 56
			transfer_state = 59
			transfer_state = 65
			transfer_state = 64
			transfer_state = 61
			transfer_state = 62
			transfer_state = 63
			transfer_state = 68
			transfer_state = 66
        }
	}

	option = { #Form North Germany but grant Prussia their greater claims
		name = occupation.6.c

        trigger = {
            PRS = {
                exists = yes
            }
        }

		ai_chance = {
			factor = 100
		}

        BRN = {
            transfer_state = 55
			transfer_state = 60
			transfer_state = 57
			transfer_state = 56
			transfer_state = 59
			transfer_state = 65
			transfer_state = 64
			transfer_state = 61

			set_cosmetic_tag = BRN_North_Germany_Puppet
        }

		PRS = {
			transfer_state = 66
			transfer_state = 68
			transfer_state = 63
			transfer_state = 62
		}

		ROOT = {
			set_autonomy = {
				target = BRN
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}
	}
}

country_event = {		#Occupation of Bohemia
	id = occupation.7
	title = occupation.7.t
	desc = occupation.7.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Form Bohemia
		name = occupation.7.a

		ai_chance = {
			factor = 0
		}

        CZE = {
            transfer_state = 69
			transfer_state = 9
			transfer_state = 74
			transfer_state = 75

			drop_cosmetic_tag = yes
			
			set_cosmetic_tag = CZE_Non_German_Naming
        }

		ROOT = {
			set_autonomy = {
				target = CZE
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}
	}
}

country_event = {		#Occupation of Luxembourg
	id = occupation.8
	title = occupation.8.t
	desc = occupation.8.d
	picture = GFX_report_PB_Generic_Spy_Event

	is_triggered_only = yes

	option = { #Form Luxembourg
		name = occupation.8.a

		ai_chance = {
			factor = 0
		}

        LUX = {
            transfer_state = 8
        }

		ROOT = {
			set_autonomy = {
				target = LUX
				autonomous_state = autonomy_PB_Nominal_Puppet
				freedom_level = 0.80
			}
		}
	}
}