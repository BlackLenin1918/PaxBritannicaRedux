add_namespace = russia_pol

#timed events in chronological order

#democratic protests
country_event = {
	id = russia_pol.1
	title = russia_pol.1.t
	desc = russia_pol.1.d
	picture = GFX_report_event_RUS_protest

	immediate = {
		hidden_effect = {
			SOV = {
				country_event = { id = russia_pol.2 days = 15 }
				country_event = { id = russia_pol.3 days = 38 }
				country_event = { id = russia_pol.4 days = 44 }
			}
		}
	}

	fire_only_once = yes 

	is_triggered_only = yes

	option = {
		name = russia_pol.1.a #throw them a bone
		set_variable = { flag = democracy value = 6 }
		set_variable = { var = bolshevism value = 9 }
	}

	option = {
		name = russia_pol.1.b #ignore them
		set_variable = { var = bolshevism value = 10 }
		set_variable = { var = democracy value = 5 }
	}

	option = {
		name = russia_pol.1.c #crush them
		set_variable = { var = democracy value = 4 }
		set_variable = { var = bolshevism value = 11 }
	}
}

#canonize romanovs 
country_event = {
	id = russia_pol.2
	title = russia_pol.2.t
	desc = russia_pol.2.d
	picture = GFX_report_event_RUS_romanovs

	fire_only_once = yes 

	is_triggered_only = yes

	option = {
		name = russia_pol.2.a #da
		set_variable = { var = monarchy value = 6 }
	}

	option = {
		name = russia_pol.2.b #net
		set_variable = { var = monarchy value = 5 }
	}
}

#khvostov speech
country_event = {
	id = russia_pol.3
	title = russia_pol.3.t
	desc = russia_pol.3.d
	picture = GFX_report_event_RUS_khvostov

	fire_only_once = yes 

	is_triggered_only = yes

	option = { #he makes a good point
		name = russia_pol.3.a
		add_to_variable = { var = democracy value = 1 }
	}

	option = { #fuck'm
		name = russia_pol.3.b
	}
}

#cue tee :3 :3 :3 
country_event = {
	id = russia_pol.4
	title = russia_pol.4.t
	desc = russia_pol.4.d
	picture = GFX_report_event_RUS_anastasia #to be added

	fire_only_once = yes 

	is_triggered_only = yes

	option = { #invite her to the palace
		name = russia_pol.4.a
		add_to_variable = { var = monarchy value = 1 }
		add_to_variable = { var = bolshevism value = 1 }
	}	

	option = { #ignore her
		name = russia_pol.4.b
	}
}

#kolchak confirmed
country_event = {
	id = russia_pol.4
	title = russia_pol.4.t
	desc = russia_pol.4.d
	picture = GFX_report_event_RUS_kolchak

	fire_only_once = yes 

	trigger = {
		has_country_flag = denikin_bribed
		has_country_flag = kappel_bribed
		has_country_flag = wrangel_bribed
	}

	option = { #confirm kolchak
		name = russia_pol.4.a
		set_country_flag = kolchak_chosen
		clr_country_flag = power_struggle
	}	
}


######decision triggered events - all are flavor, go in flavor file


####   hidden modifier events for bolsheviks 


country_event = { #warring socialist country #### BUGGED
	id = russia_pol.6
	hidden = yes

	trigger = {
		SOV = {
			has_offensive_war_with = {
				any_country = {
					limit = {
						OR = {
							has_government = socialism
							has_government = authsoc
						}
						NOT = {
							has_country_flag = rus_socialist_war
						}
					}
				}
			}
		}
	}

	mean_time_to_happen = {	hours = 1 }

	option = {
		random_country = {
			limit = {
				has_defensive_war_with = SOV
				OR = {
					has_government = socialism
					has_government = authsoc
				}
				NOT = { has_country_flag = rus_socialist_war }
			}
			set_country_flag = rus_socialist_war
		}
		SOV = {
			add_to_variable = { var = bolshevism value = 2 }
		}
	}
}

#pol 7 reserved
#pol 8 reserved

news_event = { #lakoba prison break
	id = russia_pol.9
	title = russia_pol.9.t
	desc = russia_pol.9.d

	is_triggered_only = yes

	immediate = {
		add_to_variable = { var = bolshevism value = 1 }
	}

	option = { #invite her to the palace
		name = russia_pol.9.a
	}	
}

news_event = { #tukhachevsky on the run
	id = russia_pol.10
	title = russia_pol.10.t
	desc = russia_pol.10.d

	is_triggered_only = yes

	immediate = {
		set_country_flag = bolshevik_crisis #unlocks bolshevik crisis decisions
		add_to_variable = { var = bolshevism value = 1 }
	}

	option = { #ok
		name = russia_pol.10.a
	}	
}

#bolshevik rally in petrograd
country_event = {
	id = russia_pol.11
	title = russia_pol.11.t
	desc = russia_pol.11.d
	picture = GFX_report_event_RUS_protest2

	fire_only_once = yes 

	is_triggered_only = yes

	option = { #allow the rally to proceed
		name = russia_pol.11.a
		add_to_variable = { var = bolshevism value = 1 }
	}	

	option = { #crush the rally
		name = russia_pol.11.b
		add_to_variable = { var = bolshevism value = 1 }
	}
}

news_event = { #bolshevik anniversary celebrations
	id = russia_pol.12
	title = russia_pol.12.t
	desc = russia_pol.12.d

	is_triggered_only = yes

	immediate = {
		add_to_variable = { var = bolshevism value = 1 }
	}

	option = { #ok
		name = russia_pol.12.a
	}	
}

news_event = { #workers strikes
	id = russia_pol.13
	title = russia_pol.13.t
	desc = russia_pol.13.d

	is_triggered_only = yes

	option = {
		name = russia_pol.13.a #throw them a bone
		subtract_from_variable = { var = bolshevism value = 1 }
		##some debuff
	}

	option = {
		name = russia_pol.13.b #ignore them
	}

	option = {
		name = russia_pol.13.c #crush them
		add_to_variable = { var = bolshevism value = 1 }
	}
}

########################### RUSSIAN CIVIL WAR

country_event = {
	id = russia_pol.14
	title = russia_pol.14.t
	desc = russia_pol.14.d
	picture = GFX_report_event_RUS_soldiers5

	fire_only_once = yes

	is_triggered_only = yes

	immediate = {
	hidden_effect = {
		set_global_flag = rcw_begin
		SOV = { country_event = { id = russia_pol.16 days = 5 } }
		#northern soviet shit
		NSU = {
			transfer_state = 264
			transfer_state = 351
			transfer_state = 400
			transfer_state = 248
			transfer_state = 252
			transfer_state = 253
			if = {
				limit = {
					SOV = {
						owns_state = 215
					}
				}
				NSU = {
					transfer_state = 215
				} 
			}
			if = {
				limit = {
					SOV = {
						owns_state = 216
					}
				}
				NSU = {
					transfer_state = 216
				} 
			}
			load_oob = NSU_1936
			set_capital = 248
			#declare_war_on = { target = SOV type = annex_everything }	
		}
		#caucasian soviet shit
		CSU = {
				transfer_state = 232
				transfer_state = 235
				transfer_state = 236
				transfer_state = 237
				transfer_state = 238
				transfer_state = 406
				transfer_state = 407
				load_oob = CSU_1936
				set_capital = 236
				#declare_war_on = { target = SOV type = annex_everything }	}
			}
		#siberian soviet shit
		SSU = {
			transfer_state = 588
			transfer_state = 654
			transfer_state = 40
			transfer_state = 570
			transfer_state = 571
			transfer_state = 578
			transfer_state = 403
			transfer_state = 569
			if = {
				limit = {
					SOV = {
						owns_state = 589
					}
				}
				NSU = {
					transfer_state = 589
				} 
			}
			load_oob = SSU_1936
			set_capital = 570
			#declare_war_on = { target = SOV type = annex_everything }
		}
		#alliance shit
		NSU = {
			give_military_access = SSU
			diplomatic_relation = { country = SSU relation = non_aggression_pact }	
			give_military_access = CSU
			diplomatic_relation = { country = CSU relation = non_aggression_pact }
		}		
		SSU = {
			give_military_access = NSU	
			give_military_access = CSU
			diplomatic_relation = { country = CSU relation = non_aggression_pact }	
		}
		CSU = {
			give_military_access = NSU
			give_military_access = SSE
		}
	}
	}

	option = {
		name = russia_pol.14.a
	}
	option = { #play NSU
		name = russia_pol.14.b
		trigger = {
			is_ai = no
		}
		NSU = {
			change_tag_from = SOV
		}
	}
	option = { #play SSU
		name = russia_pol.14.c
		trigger = {
			is_ai = no
		}
		SSU = {
			change_tag_from = SOV
		}
	}
	option = { #play CSU
		name = russia_pol.14.e
		trigger = {
			is_ai = no
		}
		CSU = {
			change_tag_from = SOV
		}
	}
}

country_event = {
	id = russia_pol.15 
	hidden = yes

	trigger = {
		tag = SOV
		focus_progress = { focus = RUS_power_struggle progress > 0.90 }
		NOT = {
			has_country_flag = kolchak_chosen
		}
	}

	option = { #begins path to elections
		trigger = {
			SOV = {
				has_country_flag = { flag = democracy value > 8 }
				has_country_flag = { flag = monarchy value < 8 }
			}
		}
		set_country_flag = russian_elections_planned
	}

	option = { #begins path to restoration
		trigger = {
			SOV = {
				has_country_flag = { flag = democracy value < 8 }
				has_country_flag = { flag = monarchy value > 8 }
			}
		}
		set_country_flag = anastasia_coronation
	}	

	option = { #kolchak violent takeover
		trigger = {
			OR = {
				SOV = {
					has_country_flag = { flag = democracy value > 8 }
					has_country_flag = { flag = monarchy value > 8 }
				}
				SOV = {
					has_country_flag = { flag = democracy value < 8 }
					has_country_flag = { flag = monarchy value < 8 }
				}
			}
		}
		set_country_flag = kolchak_takeover 
		add_stability = -10
	}
}

#war declaration
country_event = {
	id = russia_pol.16
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		SSU = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			}
		}
		NSU = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			}
		}
		CSU = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			}
		}
	}
}

#trigger for civil war
country_event = {
	id = russia_pol.17
	hidden = yes
	fire_only_once = yes
	trigger = {
		tag = SOV
		check_variable = {
			var = bolshevism
			value = 20
			compare = greater_than_or_equals
		}
	}
	option = {
		SOV = {
			country_event = { id = russia_pol.15 hours = 6} 
		}
	}
}

#trigger to add power struggle flag
country_event = {
	id = russia_pol.15 
	hidden = yes

	trigger = {
		tag = SOV
		focus_progress = { focus = RUS_power_struggle progress > 0.01 }
	}

	option = {
		set_country_flag = power_struggle
	}
}