on_actions = {
	#### PEACE/WAR VICTORY ON_CAPITULATION BLOCK ####
	#### PUT YOUR SHIT HERE
	# At the end of each global block, set the skip_default_capitulation GLOBAL flag
	# go away stinky vanilla peace

	# FROM = winner 
	# ROOT = country being capitulated/loser

	# DO NOT FUCKING TOUCH THIS
	# I AM DEATHLY FUCKING SERIOUS RIGHT NOW
	# XOXO - Grestin
	# Somtimes I wonder if this system is even worth the pain - Bernie
	# Make sure to space stuff out properly and keep everything neat - Bernie

	on_capitulation = {
		effect = {
			log = "[GetDateText]: FROM: [From.GetName] ROOT: [Root.GetName] on_capitulation"

			set_global_flag = show_peace_popup_alert
			FROM = {
				save_global_event_target_as = winning_country
			} 
			ROOT = {
				save_global_event_target_as = losing_country
			}

			log = "[GetDateText]: winner/loser: FROM: [winning_country.GetName] ROOT: [losing_country.GetName] on_capitulation"

			if = {
				limit = {
					event_target:losing_country = {
						any_allied_country = {
							has_war_together_with = event_target:losing_country
						}
					}
				}
				set_global_flag = losing_country_multiple
			}

			if = {
				limit = {
					event_target:winning_country = {
						any_allied_country = {
							has_war_together_with = event_target:winning_country
						}
					}
				}
				set_global_flag = winning_country_multiple
			}

			#Annexation block
			# this will only trigger ROOT (the loser) is in a faction and is NOT the only survivor of said faction
			# if ROOT is the only survivor then it will trigger the proper effects below
			if = {
				limit = {
					NOT = {
						ROOT = {
							has_country_flag = PB_DO_NOT_DELETE_ME # Seriously don't 
						}
					}
				}
			    set_global_flag = war_won

			    # normal peace stuff

			    if = { # Malaysian insurguncy - Defeat
				    limit = {
					    FROM = {
						    has_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
						    original_tag = KAL
					    }
					    ROOT = {
						    has_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
						    original_tag = MAL
					    }
				    }

				    FROM = {
					    country_event = {
						    id = waroutcome.1
						    days = 7
					    }
					    white_peace = ROOT
					    annex_country = {
						    target = ROOT
						    transfer_troops = no
					    }
				    }
				    set_global_flag = skip_default_capitulation
			    }	

			    if = { # Malaysian insurguncy - Victory
				    limit = {
					    FROM = {
						    has_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
						    original_tag = MAL
					    }
					    ROOT = {
						    has_country_flag = PB_WAR_SYSTEM_Malaysian_Insurgency
						    original_tag = KAL
					    }
				    }

				    FROM = {
					    country_event = {
						    id = waroutcome.2
						    days = 7
					    }

					    white_peace = ROOT

					    drop_cosmetic_tag = yes
				    }
				    set_global_flag = skip_default_capitulation
			    }	
		
			    if = { # Irish Secession Crisis - Loyalist Victory
				    limit = {
					    FROM = {
						    OR = {
							    original_tag = IRE
							    original_tag = ENG
								is_in_faction_with = ENG
						    }
					    }
					    ROOT = {
						    original_tag = ICA
					    }
				    }

				    IRE = {
					    white_peace = ROOT
					    annex_country = {
					        target = ROOT
						    transfer_troops = no
					    }
				    }
					ENG = {
						annex_country = {
					        target = ULS
						    transfer_troops = no
					    }
					}
				    set_global_flag = skip_default_capitulation
			    }	

			    if = { # Chinese Civil War - Qing Victory
				    limit = {
					    FROM = {
							OR = {
								is_in_faction_with = CHI
								original_tag = CHI
							}
					    }
					    ROOT = {
						    original_tag = ROC
					    }
				    }

				    FROM = {
					    white_peace = ROOT
					    annex_country = {
						    target = ROOT
						    transfer_troops = no
					    }
				    }
				    set_global_flag = skip_default_capitulation
			    }

			    if = { # Chinese Civil War - Republican Victory
				    limit = {
					    FROM = {
						    OR = {
								is_in_faction_with = ROC
								original_tag = ROC
							}
					    }
					    ROOT = {
					        original_tag = CHI
					    }
				    }

				    FROM = {
					    white_peace = ROOT
					    annex_country = {
						    target = ROOT
						    transfer_troops = no
				        }
				    }   
				    set_global_flag = skip_default_capitulation
			    }

			    if = { # Polish Revolt - Defeat
				    limit = {
					    FROM = {
						    OR = {
								is_in_faction_with = RUS
								original_tag = RUS
							}
					    }
					    ROOT = {
						    original_tag = POL
					    }
				    }

				    RUS = {
					    white_peace = ROOT
					    annex_country = {
						    target = ROOT
						    transfer_troops = no
					    }
			            news_event = { 
						    id = PBNews.128 
						    days = 1 
					    } 
					    add_state_core = 97
					    add_state_core = 91
					    add_state_core = 89
					    add_state_core = 92
					    add_state_core = 98
					    add_state_core = 10
					    add_state_core = 90
					    add_state_core = 87
					    add_state_core = 67
					    add_state_core = 762
					    add_state_core = 88
				    } 
				    set_global_flag = skip_default_capitulation
			   }

			    if = { # Chinese Civil War - Russian Invasion of Mongolia
				    limit = {
					    FROM = {
						    OR = {
								is_in_faction_with = RUS
								original_tag = RUS
							}
					    }
					    ROOT = {
						    original_tag = MON
					    }
				    }

				    RUS = {
					    white_peace = ROOT
					    set_autonomy = {
						    target = MON
						    autonomous_state = autonomy_PB_Imperial_Autonomy
						    freedom_level = 0.5
					    }	
				    }

				    MON = {
					    transfer_state = 321
					    transfer_state = 297
					    transfer_state = 330	
					    set_politics = { 
						    ruling_party = ds
						    elections_allowed = no 
					    }
					    add_popularity = {
						    ideology = ds
						    popularity = 0.05
					    }
 
					    create_country_leader = {
						    name = "Demchugdongrub"
						    desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
						    picture = "Portrait_MON_Demchugdongrub.dds"
						    ideology = DS_VARIANT_06
					    }

					    set_cosmetic_tag = MON_RUS_Nationalists
				    }
				    set_global_flag = skip_default_capitulation
			    }

			    if = { # Chinese Civil War - Russian Invasion of Manchuria
				    limit = {
					    FROM = {
						    OR = {
							    is_in_faction_with = RUS
							    original_tag = RUS
						    }
					    }
					    ROOT = {
						    original_tag = MAN
					    }	    
					}

				    RUS = {
					    white_peace = ROOT
					    set_autonomy = {
						    target = MAN
						    autonomous_state = autonomy_PB_Imperial_Autonomy
						    freedom_level = 0.5
					    }
				    }

				    MAN = {
					    transfer_state = 610
				        transfer_state = 716
					    transfer_state = 328
					    transfer_state = 715
					    transfer_state = 714
					    transfer_state = 717
					    transfer_state = 761

					    set_politics = { 
						    ruling_party = ds
						    elections_allowed = no 
					    }

					    add_popularity = {
						    ideology = ds
						    popularity = 0.05
					    }

					    create_country_leader = {
						    name = "Zhang Jinghui"
						    desc = "POLITICS_MOHAMMED_ZAHIR_SHAH_DESC"
						    picture = "Portrait_MAN_Zhang_Jinghui.dds"
						    ideology = DS_VARIANT_01
					    }

					    set_cosmetic_tag = MAN_RUS_Puppet
				    }
				    set_global_flag = skip_default_capitulation
			    }

			    if = { # Chinese Civil War - Central Plains War - Xebei Victory
				    limit = {
					    FROM = {
						    original_tag = XSM
					    }
					    ROOT = {
						    original_tag = FTR
					    }
				    }

				    FROM = {
					    white_peace = ROOT
					    annex_country = {
						    target = ROOT
						    transfer_troops = no
					    }
				    }
				    set_global_flag = skip_default_capitulation
			    }

			    if = { # Chinese Civil War - Central Plains War - Free Territory Victory
			    	limit = {
			    		FROM = {
			    			original_tag = FTR
			    		}
			    		ROOT = {
			    			original_tag = XSM
			    		}
			    	}

    			    	FROM = {
			    		white_peace = ROOT
			    		annex_country = {
			    			target = ROOT
			    			transfer_troops = no
			    		}
			    	}
			    	set_global_flag = skip_default_capitulation
			    }

			    if = { # Arab Wars
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = HEJ
			    				original_tag = JBS
			    				original_tag = JOR
			    				original_tag = SYR
			    				original_tag = MIQ
			    				original_tag = YEM
			    				original_tag = IKW
			    				original_tag = UAR
			    			}
			    		}
			    		ROOT = {
			    			OR = {
			    				original_tag = HEJ
			    				original_tag = JBS
			    				original_tag = JOR
			    				original_tag = SYR
			    				original_tag = MIQ
			    				original_tag = YEM
			    				original_tag = IKW
			    				original_tag = UAR
			    			}
			    		}
			    	}
    
			    	FROM = {
			    		white_peace = ROOT
			    		annex_country = {
			    			target = ROOT
			    			transfer_troops = no
			    		}
			    	}
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # British Africa Algeria Invasion
			    	limit = {
			    		FROM = {
			    			original_tag = BAF
			    		}
			    		ROOT = {
			    			OR = {
			    				original_tag = ALG
			    				original_tag = FRG
			    			}
			    		}
			    	}
    
			    	FROM = {
			    		white_peace = ROOT
			    		annex_country = {
			    			target = ROOT
			    			transfer_troops = no
			    		}
			    	}
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # South African War - Natalia Victory against Swazi
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = NAT
			    				original_tag = GOS
			    			}
			    		}
			    		ROOT = {
			    			original_tag = SWA
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	NAT = {
			    		annex_country = {
			    			target = SWA
			    			transfer_troops = no
			    		}
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # German Liberation Front - Got beamed out of existance
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = GLF
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	MGE = {
			    		annex_country = {
			    			target = GLF
			    			transfer_troops = no
			    		}
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # France Beats Brittany
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = BRT
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	FRA = {
			    		annex_country = {
			    			target = BRT
			    			transfer_troops = no
			    		}
			    		news_event = {
			    			id = PBNews.84
			    			days = 1
			    	    }
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # France Beats Wallonia
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = WLA
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	FRA = {
			    		annex_country = {
			    			target = WLA
			    			transfer_troops = no
			    		}
			    		news_event = {
			    			id = PBNews.100
			    			days = 1
			    	    }
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # France Beats Holland
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = HOL
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	FRA = {
			    		annex_country = {
			    			target = HOL
			    			transfer_troops = no
			    		}
			    		news_event = {
			    			id = PBNews.101
			    			days = 1
			    	    }
			    	}
			    	HOL = {
			    		transfer_state = 856
			    		transfer_state = 857
			    		transfer_state = 310
			    		transfer_state = 309
			    		set_cosmetic_tag = HOL_Exiled
			    		set_country_flag = HOL_Dutch_Exiled
			    
			    		add_opinion_modifier = {
			    			target = FRA modifier = aggressive_expansionism
			    		}
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # France Beats Corsica
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = COR
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	FRA = {
			    		annex_country = {
			    			target = COR
			    			transfer_troops = no
			    		}
			    		news_event = {
			    			id = PBNews.102
			    			days = 1
			    	    }
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
			    if = { # France Beats Basque
			    	limit = {
			    		FROM = {
			    			OR = {
			    				original_tag = FRA
			    				is_in_faction_with = FRA
			    			}
			    		}
			    		ROOT = {
			    			original_tag = BSQ
			    		}
			    	}
			    	FROM = {
			    		white_peace = ROOT
			    	}
			    	FRA = {
			    		annex_country = {
			    			target = BSQ
			    			transfer_troops = no
			    		}
			    		news_event = {
			    			id = PBNews.103
			    			days = 1
			    	    }
			    	}
    
			    	set_global_flag = skip_default_capitulation
			    }
    
		        if = { #Great Balkan War - Entente Victory against Serbia
			        limit = {
			    	    FROM = {
			    		    OR = {
			    			    original_tag = HUN
			    			    is_in_faction_with = HUN
			    		    }
			    	    }
			    	    ROOT = {
			    		    original_tag = SER
			    	    }
			    	    has_global_flag = Great_Balkan_War_Fired
			        }
			        SER = {
			    	    leave_faction = yes
			    	    white_peace = HUN
			    	    white_peace = BUL
			    	    white_peace = CRO
			        }
			        HUN = {
			    	    country_event = {
			    		    id = balkwar.10
			    	    }
			        }
			        set_global_flag = PB_GBW_Serbia_Defeated
    
			        set_global_flag = skip_default_capitulation
		        }
    
		        if = { #Great Balkan War - Entente Victory against Romania
			        limit = {
			    	    FROM = {
			    		    OR = {
			    			    original_tag = HUN
			    			    is_in_faction_with = HUN
			    		    }
			    	    }
			    	    ROOT = {
			    		    original_tag = ROM
			    	    }
			    	    has_global_flag = Great_Balkan_War_Fired
			        }
			        ROM = {
			    	    leave_faction = yes
			    	    white_peace = HUN
			    	    white_peace = BUL
			    	    white_peace = CRO
			        }
			        HUN = {
			    	    country_event = {
			    		    id = balkwar.21
			    	    }
			        }
			        set_global_flag = PB_GBW_Romania_Defeated
    
			        set_global_flag = skip_default_capitulation
		        }

		        if = { #Great Balkan War - Serbian Victory against Hungary
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = SER
		        				is_in_faction_with = SER
		        			}
		        		}
		        		ROOT = {
		        			original_tag = HUN
		        		}
		        		has_global_flag = Great_Balkan_War_Fired
		        	}
		        	HUN = {
		        		leave_faction = yes
		        		white_peace = SER
		        		white_peace = ROM
		        	}
		        	HUN = {
		        		country_event = { 
		        			id = balkwar.23
		        		}
		        	}
		        	set_global_flag = PB_GBW_Hungary_Defeated
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Great Balkan War - Serbian Victory against Croatia
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = SER
		        				is_in_faction_with = SER
		        			}
		        		}
		        		ROOT = {
		        			original_tag = CRO
		        		}
		        		has_global_flag = Great_Balkan_War_Fired
		        	}
		        	HUN = {
		        		end_puppet = CRO
		        	}
		        	CRO = {
		        		leave_faction = yes
		        		white_peace = SER
		        		white_peace = ROM
		        	}
		        	SER = {
		        		country_event = {
		        			id = balkwar.22
		        		}
		        	}
		        	set_global_flag = PB_GBW_Croatia_Defeated
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Great Balkan War - Serbian Victory against Bulgaria
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = SER
		        				is_in_faction_with = SER
		        			}
		        		}
		        		ROOT = {
		        			original_tag = BUL
		        		}
		        		has_global_flag = Great_Balkan_War_Fired
		        	}
		        	BUL = {
		        		leave_faction = yes
		        		white_peace = SER
		        		white_peace = ROM
		        	}
		        	SER = {
		        		country_event = {
		        			id = balkwar.24
		        		}
		        	}
		        	set_global_flag = PB_GBW_Bulgaria_Defeated
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #South African War - Natalia Victory
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = NAT
		        				is_in_faction_with = NAT
		        			}
		        		}
		        		ROOT = {
		        			original_tag = NRP
		        		}
		        	}
        
		        	NAT = {
		        		white_peace = NRP
		        		white_peace = ORJ
		        		annex_country = {
		        			target = NRP
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = ORJ
		        			transfer_troops = no
		        		}
		        		country_event = { id = south_africa.16 } 
		        	}
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #South African War - New Republic Victory
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = NRP
		        				is_in_faction_with = NRP
		        			}
		        		}
		        		ROOT = {
		        			original_tag = NAT
		        		}
		        	}
        
		        	FROM = {
		        		white_peace = ROOT
		        	}
        
		        	NRP = {
		        		country_event = { id = south_africa.17 } 
		        		annex_country = {
		        			target = NAT
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = GOS
		        			transfer_troops = no
		        		}
		        	}
		        	set_global_flag = skip_default_capitulation
		        }	
        
		        if = { #South African War - Sudwestafrika Victory - Natalia
		        	limit = {
		        		FROM = {
		        			original_tag = SDW
		        		}
		        		ROOT = {
		        			AND = {
		        				original_tag = NAT
		        				original_tag = GOS
		        			}
		        		}
		        	}
        
		        	SDW = {
		        		set_country_flag = SDW_Has_Beaten_South_African_Fascists
		        		white_peace = NAT
		        		white_peace = ORJ
		        		annex_country = {
		        			target = NAT
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = GOS
		        			transfer_troops = no
		        		}
		        		if = {
		        			limit = {
		        				AND = {
		        					has_country_flag = SDW_Has_Beaten_South_African_Democrats
		        					has_country_flag = SDW_Has_Beaten_South_African_Fascists
		        				}
		        			}
		        			country_event = { id = south_africa.14 days = 3 } 
		        		}
		        	}
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #South African War - Sudwestafrika Victory - New Republic
		        	limit = {
		        		FROM = {
		        			original_tag = SDW
		        		}
		        		ROOT = {
		        			AND = {
		        				original_tag = NRP
		        				original_tag = ORJ
		        			}
		        		}
		        	}
        
		        	SDW = {
		        		set_country_flag = SDW_Has_Beaten_South_African_Democrats
		        		white_peace = NRP
		        		white_peace = ORJ
		        		annex_country = {
		        			target = NRP
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = ORJ
		        			transfer_troops = no
		        		}
		        		if = {
		        			limit = {
		        				AND = {
		        					has_country_flag = SDW_Has_Beaten_South_African_Democrats
		        					has_country_flag = SDW_Has_Beaten_South_African_Fascists
		        				}
		        			}
		        			country_event = { id = south_africa.14 days = 3 } 
		        		}
		        	}
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Second Great War - League Victory
		        	limit = {
		        		FROM = {
		        			OR = {
		        				has_global_flag = PB_Great_War_2_Fired
		        				original_tag = ENG
		        				is_in_faction_with = ENG
		        			}
		        		}
		        		OR = {
		        			ROOT = {
		        				has_global_flag = PB_Great_War_2_Fired
		        				original_tag = FRA
		        			}
		        		}
		        		ROOT = {
		        			has_global_flag = PB_Great_War_2_Fired
		        			original_tag = RUS
		        		}
		        	}
        
		        	every_country = {
		        		limit = {
		        			OR = {
		        				has_war_with = FRA
		        				has_war_with = RUS
		        			}
		        		}
		        		white_peace = FRA
		        		white_peace = RUS
		        	}
		        	ENG = {
		        		country_event = { id = waroutcome.5 days = 5 } 
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Fall Of Britain
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = ENG
		        			is_in_faction_with = ENG
		        		}
        
		        	}
        
		        	every_country = {
		        		limit = {
		        			OR = {
		        				has_war_with = ENG
		        			}
		        		}
		        		white_peace = ENG
		        	}
		        	SPR = {
		        		transfer_state = 701
		        		transfer_state = 118
		        		annex_country = {
                            target = POR
                            transfer_troops = no
                        }
		        	}
		        	FRA = {
		        		set_country_flag = FRA_Cucked_Britain
		        		country_event = { id = occupation.1 days = 2 } 
		        		transfer_state = 131
		        		transfer_state = 116
		        	    transfer_state = 130
		        	    transfer_state = 132
		        	    transfer_state = 129
		        	    transfer_state = 128
		        	    transfer_state = 125
		        	    transfer_state = 126
		        	    transfer_state = 338
		        	    transfer_state = 127
		        	    transfer_state = 128
		        	    transfer_state = 123
		        		transfer_state = 121
		        	    transfer_state = 133
		            	transfer_state = 136
		            	transfer_state = 120
		        		transfer_state = 122
		        		if = {
		        			limit = {
		        				ICA = {
		        					NOT = {
		        						controls_state = 39
		        					}
		        				}
		        			}
		        			transfer_state = 119
		        		}
		        	}
        
		        	ENG = {
		        	    load_focus_tree = PB_generic
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Mexico Fucks The Coalition
		        	limit = {
		        		FROM = {
		        			original_tag = MEX
		        		}
		        		ROOT = {
		        			OR = {
		        			    original_tag = RGD
		        				original_tag = TEX
		        				original_tag = SFE
		        				original_tag = CAL
		        			}
		        		}
		        	}
        
		        	every_country = {
		        		limit = {
		        			OR = {
		        				has_war_with = MEX
		        			}
		        		}
		        		white_peace = MEX
		        	}
		        	MEX = {
		        		news_event = { id = PBNews.119 days = 1 } 
		        		annex_country = {
		        			target = RGD
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = TEX
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = SFE
		        			transfer_troops = no
		        		}
		        		annex_country = {
		        			target = CAL
		        			transfer_troops = no
		        		}
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { #Coalition Fucks Mexico
		        	limit = {
		        		FROM = {
		        			OR = {
		        			    original_tag = RGD
		        				original_tag = TEX
		        				original_tag = SFE
		        				original_tag = CAL
		        			}
		        		}
		        		ROOT = {
		        			original_tag = MEX
		        		}
        
		        	}
        
		        	every_country = {
		        		limit = {
		        			OR = {
		        				has_war_with = MEX
		        			}
		        		}
		        		white_peace = MEX
		        	}
		        	CAL = {
		        		news_event = { id = PBNews.120 days = 1 } 
		        		transfer_state = 484
		        	}
		        	TEX = {
		        		transfer_state = 903
		        		transfer_state = 908
		        		transfer_state = 907
		        	}
		        	483 = {
		        		set_demilitarized_zone = yes
		        	}
		        	482 = {
		        		set_demilitarized_zone = yes
		        	}
		        	481 = {
		        		set_demilitarized_zone = yes
		        	}
		        	MEX = {
		        		add_popularity = {
		        			ideology = cn
		        			popularity = 0.2
		        		}
		        		set_politics = {
		        			ruling_party = cn
		        			elections_allowed = yes
		        			last_election = "1933.01.01"
		        			election_frequency = 48
		        		}
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
		        
		        if = { #Fall Of Germany
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = GER
		        			is_in_faction_with = GER
		        		}
        
		        	}
        
		        	every_country = {
		        		limit = {
		        			OR = {
		        				has_war_with = GER
		        			}
		        		}
		        		white_peace = GER
		        	}
		        	
		        	FRA = {
		        		if = {
		        			limit = {
		        				NOT = {
		        					has_global_flag = PB_GER_Defeated
		        				}
		        			}
		        			country_event = { id = germany.25 days = 1 } 
		        		}
						if = {
                            limit = {
                            	has_dlc = "La Resistance"
                            }
                            9 = {
                            	remove_dynamic_modifier = { modifier = czech_agitation }
                            }
                            75 = {
                            	remove_dynamic_modifier = { modifier = czech_agitation }
                            }
                            28 = {
                            	remove_dynamic_modifier = { modifier = french_terrorism }
                            }
                        }                             
		        		country_event = { id = French.95 days = 3 } 
		        		add_ideas = FRA_German_Liberation_Front_Presence_High
		        		set_country_flag = FRA_Cucked_Germany
		        		transfer_state = 28
		        		transfer_state = 917
		             	transfer_state = 42
		        	    transfer_state = 8
		            	transfer_state = 51
		        		transfer_state = 55
		        	    transfer_state = 54
		        	    transfer_state = 52
		        	    transfer_state = 153
		            	transfer_state = 152
		            	transfer_state = 4
		        	    transfer_state = 53
		            	transfer_state = 60
		            	transfer_state = 59
		            	transfer_state = 57
		            	transfer_state = 56
		            	transfer_state = 50
		        		transfer_state = 69
		        	    transfer_state = 9
		            	transfer_state = 75
		        	    transfer_state = 74
		        		transfer_state = 66
		            	transfer_state = 65
		        	    transfer_state = 68
		        	    transfer_state = 64
		            	transfer_state = 61
		        	    transfer_state = 62
		        	    transfer_state = 63
		        		transfer_state = 39
		        		transfer_state = 736
		        		transfer_state = 102
                        transfer_state = 909
		        		transfer_state = 923
		        		set_country_flag = GLF_STUFF_ACTIVE # - Replace this with an event informing the player
        
		        		GER = {
		        	        load_focus_tree = PB_generic
		        		}
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # Ireland Got Fucked
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = IRE
		        		}
		        	}
        
		        	FRA = {
		        		white_peace = ROOT
		        		annex_country = {
		        			target = ROOT
		        			transfer_troops = no
		        		}
		        	}
        
		        	IRE = {
		        		transfer_state = 135
		        		transfer_state = 113
		        		transfer_state = 134
		        	}
        
		        	FRA = {
		        	    if = {
		        		    limit = {
		        			    OR = {
		        				    has_dlc = "Together for Victory"
		        				    has_dlc = "Man the Guns"
		        			    }
		        		    }
        
		        		    set_autonomy = {
		        			    target = IRE
		        			    autonomous_state = autonomy_PB_Collaborator_State
		        			    freedom_level = 0.80
		        		    }
        
		        		    else = {
		        			    puppet = IRE
		        		    }
		        	    }
		            }
        
		        	IRE = {
		        		set_politics = {
	                        ruling_party = ni
                            elections_allowed = no
                            last_election = "1935.12.17"
                            election_frequency = 48
                        }
		        		set_cosmetic_tag = IRE_FRA_puppet
		        		remove_ideas = IRE_compromise 
		        		remove_ideas = IRE_first_colony
		        		remove_ideas = IRE_inexperienced_army
		        		remove_ideas = IRE_veterans_association
		        		remove_ideas = ENG_British_Economic_Sphere
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # Denmark Got Fucked
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = DEN
		        		}
		        	}
        
		        	FRA = {
		        		white_peace = ROOT
		        		annex_country = {
		        			target = ROOT
		        			transfer_troops = no
		        		}
		        		news_event = { 
		        			id = PBNews.152
		        			days = 1 
		        		} 
		        	}
        
		        	DEN = {
		        		if = {
		        			limit = {
		        				ENG = {
		        					has_war_with = FRA
		        				}
		        			}
		        			ENG = { 
		        				add_to_faction = DEN 
		        			}
		        		}
		        	}
        
		        	SCH = {
		        		transfer_state = 795
		        		transfer_state = 99
		        		transfer_state = 37
		        		transfer_state = 58
		        		set_capital = 37
		        	}
        
		        	FRA = {
		        	    if = {
		        		    limit = {
		        			    OR = {
		        				    has_dlc = "Together for Victory"
		        				    has_dlc = "Man the Guns"
		        			    }
		        		    }
        
		        		    set_autonomy = {
		        			    target = SCH
		        			    autonomous_state = autonomy_PB_Collaborator_State
		        			    freedom_level = 0.80
		        		    }
        
		        		    else = {
		        			    puppet = SCH
		        		    }
		        	    }
		            }
        
		        	795 = {
		        		add_core_of = SCH
		        	}
		        	99 = {
		        		add_core_of = SCH
		        	}
		        	37 = {
		        		add_core_of = SCH
		        	}
		        	58 = {
		        		add_core_of = SCH
		        	}
        
		        	DEN = {
		        		set_cosmetic_tag = DEN_Exile
		        	}
        
		        	SCH = {
		        		set_politics = {
	                        ruling_party = ni
                            elections_allowed = no
                        }
		        		add_popularity = {
                            ideology = ni
                            popularity = 1
                        }
		        		set_cosmetic_tag = SCH_FRA_Puppet
		        		kill_country_leader = yes
		        		create_country_leader = {
	                        name = "Kai Henning Bothildsen Nielsen"
	                        desc = "POLITICS_Kai_Nielsen_DESC"
	                        picture = "gfx/leaders/DEN/Portrait_DEN_Kai_Nielsen.dds"
	                        expire = "1965.1.1"
	                        ideology = NI_VARIANT_01
		        			traits = { 
		        			}
                        }
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # Sweden Got Fucked
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = SWE
		        		}
		        	}
        
		        	FRA = {
		        		white_peace = ROOT
		        		news_event = { 
		        			id = PBNews.154
		        			days = 1 
		        		} 
		        	}
        
		        	FRA = {
		        	    if = {
		        		    limit = {
		        			    OR = {
		        				    has_dlc = "Together for Victory"
		        				    has_dlc = "Man the Guns"
		        			    }
		        		    }
        
		        		    set_autonomy = {
		        			    target = SWE
		        			    autonomous_state = autonomy_PB_Collaborator_State
		        			    freedom_level = 0.80
		        		    }
        
		        		    else = {
		        			    puppet = SWE
		        		    }
		        	    }
		            }
        
		        	SWE = {
		        		set_politics = {
	                        ruling_party = ni
                            elections_allowed = no
                        }
		        		add_popularity = {
                            ideology = ni
                            popularity = 1
                        }
		        		set_cosmetic_tag = SWE_FRA_Puppet
		        		kill_country_leader = yes
		        		create_country_leader = {
	                        name = "Sven Olov Lindholm"
	                        desc = "POLITICS_Sven_Lindholm_DESC"
	                        picture = "gfx/leaders/SWE/Portrait_SWE_Sven_Lindholm.dds"
	                        expire = "1965.1.1"
	                        ideology = NI_VARIANT_01
		        			traits = { 
		        			}
                        }
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # Norway Got Fucked
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = FRA
		        				is_in_faction_with = FRA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = NOR
		        		}
		        	}
        
		        	FRA = {
		        		white_peace = ROOT
		        		news_event = { 
		        			id = PBNews.153
		        			days = 1 
		        		} 
		        	}
        
		        	FRA = {
		        	    if = {
		        		    limit = {
		        			    OR = {
		        				    has_dlc = "Together for Victory"
		        				    has_dlc = "Man the Guns"
		        			    }
		        		    }
        
		        		    set_autonomy = {
		        			    target = NOR
		        			    autonomous_state = autonomy_PB_Collaborator_State
		        			    freedom_level = 0.80
		        		    }
        
		        		    else = {
		        			    puppet = NOR
		        		    }
		        	    }
		            }
        
		        	NOR = {
		        		remove_ideas = PB_NOR_Norwegian_Resistance
		        		set_politics = {
	                        ruling_party = ni
                            elections_allowed = no
                        }
		        		add_popularity = {
                            ideology = ni
                            popularity = 1
                        }
		        		set_cosmetic_tag = NOR_FRA_Puppet
		        		kill_country_leader = yes
		        		create_country_leader = {
	                        name = "Ragnar Sigvald Skancke"
	                        desc = "POLITICS_Sven_Lindholm_DESC"
	                        picture = "gfx/leaders/NOR/Portrait_NOR_Ragnar_Skancke.dds"
	                        expire = "1965.1.1"
	                        ideology = NI_VARIANT_01
		        			traits = { 
		        			}
                        }
		        	}
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # IST Victory In Civil War
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = IST
		        				is_in_faction_with = IST
		        			}
		        		}
		        		ROOT = {
		        			original_tag = ITA
		        		}
		        	}
        
		        	IST = {
		        		white_peace = ROOT
		        		annex_country = {
		        			target = ROOT
		        			transfer_troops = no
		        		}
		        		news_event = { 
		        			id = PBNews.122
		        			days = 1 
		        		} 
		        	}
        
		        	set_global_flag = skip_default_capitulation
		        }
        
		        if = { # ITA Victory In Civil War
		        	limit = {
		        		FROM = {
		        			OR = {
		        				original_tag = ITA
		        				is_in_faction_with = ITA
		        			}
		        		}
		        		ROOT = {
		        			original_tag = IST
		        		}
		        	}
        
		        	ITA = {
		        		remove_ideas = PB_ITA_treaty_of_anzio
		        		white_peace = ROOT
		        		annex_country = {
		        			target = ROOT
		        			transfer_troops = no
		        		}
		        		news_event = { 
		        			id = PBNews.121
		        			days = 1 
		        		} 
		        	}
        
		        	set_global_flag = skip_default_capitulation
		        }
		        #Capitulation block
		        set_global_flag = war_continuing
	        }            
	        clr_global_flag = skip_default_capitulation
	    }
    }
	#Armchair historian of wars
	on_declare_war = {
		effect = {
			log="[GetDateText]: [Root.GetName] declared war on [From.GetName]"
		}
	}
}